<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="bank-account-api-suite.xml" />
	<munit:test name="post:\accounts:application\json:bank-account-api-config-test" doc:id="8639ce7a-8df7-44d7-a3b2-b091d614c27e" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock verify account" doc:id="6e66c15a-4f35-4fed-9e7b-8555fc3bffa5" processor="snowflake:select">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="0ef28a48-c6b8-4585-8cd8-80eea4664a59" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="outboundHeaders" value="#[readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest\mock_variable_.dwl')]" />
						<munit-tools:variable key="inputPayload" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest\mock_variable_1.dwl')]" mediaType="application/json" encoding="UTF-8" />
						<munit-tools:variable key="inputAttributes" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest\mock_variable_2.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock inputPayload" doc:id="fba38c89-5961-4078-81fb-39b92a746359" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="439f0f1f-6c4b-4436-a554-56d0c3da6439" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="outboundHeaders" value="#[readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest\mock_variable_3.dwl')]" />
						<munit-tools:variable key="inputPayload" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest\mock_variable_4.dwl')]" mediaType="application/json" encoding="UTF-8" />
						<munit-tools:variable key="inputAttributes" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest\mock_variable_5.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock inputAttributes" doc:id="9f2d7515-f5e0-4aee-9bf8-fc074da6c309" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="afaa0ce7-9c1d-479b-894d-7f49ded8a912" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="outboundHeaders" value="#[readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest\mock_variable_6.dwl')]" />
						<munit-tools:variable key="inputAttributes" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest\mock_variable_7.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit:set-event doc:name="Set Input" doc:id="3fd1eaee-855b-487a-8fde-4cdd993e8144" >
				<munit:payload value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest\set-event_payload.dwl')]" encoding="UTF-8" mediaType="application/json" />
				<munit:attributes value="#[readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest\set-event_attributes.dwl')]" />
				<munit:variables >
					<munit:variable key="outboundHeaders" value="#[readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest\set-event_variable_.dwl')]" />
				</munit:variables>
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to post:\accounts:application\json:bank-account-api-config" doc:id="786a6ab6-625b-47b8-ba5b-e7a78286f20e" name="post:\accounts:application\json:bank-account-api-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="c70207c0-f7b7-48a3-8afd-5fe2da58e86d" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import postaccountsapplicationjsonbankaccountapiconfigtest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
		</munit:validation>
	</munit:test>
	<munit:test name="post:\accounts:application\json:bank-account-api-config-test1" doc:id="a9835550-8b4b-44be-b357-e90bbdc83278" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock inputPayload" doc:id="95a0014a-95a8-4d09-8ab5-611b3dcb2e78" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="439f0f1f-6c4b-4436-a554-56d0c3da6439" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="outboundHeaders" value="#[readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\mock_variable_.dwl')]" />
						<munit-tools:variable key="inputPayload" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\mock_variable_1.dwl')]" mediaType="application/json" encoding="UTF-8" />
						<munit-tools:variable key="inputAttributes" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\mock_variable_2.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock accountNumber" doc:id="3278525b-83d4-40bd-a6c0-a494a3937c43" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="089c4a9f-3629-4a58-8f40-003ac0986c1d" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="outboundHeaders" value="#[readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\mock_variable_3.dwl')]" />
						<munit-tools:variable key="inputPayload" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\mock_variable_4.dwl')]" mediaType="application/json" encoding="UTF-8" />
						<munit-tools:variable key="inputAttributes" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\mock_variable_5.dwl')]" mediaType="application/json" encoding="UTF-8" />
						<munit-tools:variable key="accountNumber" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\mock_variable_6.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Insert data " doc:id="4526a025-55cc-4efe-9cd8-ace50891e7ad" processor="snowflake:insert">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="c8d2dfef-db05-4e1c-96f8-90af372332fb" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="outboundHeaders" value="#[readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\mock_variable_7.dwl')]" />
						<munit-tools:variable key="inputPayload" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\mock_variable_8.dwl')]" mediaType="application/json" encoding="UTF-8" />
						<munit-tools:variable key="inputAttributes" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\mock_variable_9.dwl')]" mediaType="application/json" encoding="UTF-8" />
						<munit-tools:variable key="accountNumber" value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\mock_variable_10.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit:set-event doc:name="Set Input" doc:id="69ee97b0-3d91-4ee7-9607-6dcd0dac8bd0" >
				<munit:payload value="#[output application/json --- readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\set-event_payload.dwl')]" encoding="UTF-8" mediaType="application/json" />
				<munit:attributes value="#[readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\set-event_attributes.dwl')]" />
				<munit:variables >
					<munit:variable key="outboundHeaders" value="#[readUrl('classpath://postaccountsapplicationjsonbankaccountapiconfigtest1\set-event_variable_.dwl')]" />
				</munit:variables>
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to post:\accounts:application\json:bank-account-api-config" doc:id="679b075e-0f2a-4701-9333-b5e085d6cd1b" name="post:\accounts:application\json:bank-account-api-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="38fd63ec-d218-421e-a308-63a4151e5728" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import postaccountsapplicationjsonbankaccountapiconfigtest1::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
		</munit:validation>
	</munit:test>
	<munit:test name="get:\accounts\(accountNumber):bank-account-api-config-test" doc:id="0c889362-335b-4933-a5d8-845a31730018" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock verify account" doc:id="f7bdf52d-1925-4f65-83e3-6f06c9c6eaaa" processor="snowflake:select">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="a2cadbc5-461e-4bfb-97f4-763dc02e172f" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://getaccountsaccountNumberbankaccountapiconfigtest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="outboundHeaders" value="#[readUrl('classpath://getaccountsaccountNumberbankaccountapiconfigtest\mock_variable_.dwl')]" />
						<munit-tools:variable key="inputPayload" value="#[output application/json --- readUrl('classpath://getaccountsaccountNumberbankaccountapiconfigtest\mock_variable_1.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit:set-event doc:name="Set Input" doc:id="3ffcabea-c99d-4bb6-8e10-56a0e07b92bb" >
				<munit:payload value="#[readUrl('classpath://getaccountsaccountNumberbankaccountapiconfigtest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://getaccountsaccountNumberbankaccountapiconfigtest\set-event_attributes.dwl')]" />
				<munit:variables >
					<munit:variable key="outboundHeaders" value="#[readUrl('classpath://getaccountsaccountNumberbankaccountapiconfigtest\set-event_variable_.dwl')]" />
				</munit:variables>
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to get:\accounts\(accountNumber):bank-account-api-config" doc:id="0772696e-6d10-422d-aa89-547db6aaa224" name="get:\accounts\(accountNumber):bank-account-api-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="b70b27da-7fe6-482c-8ec5-0ab47baf392b" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import getaccountsaccountNumberbankaccountapiconfigtest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
		</munit:validation>
	</munit:test>
	<munit:test name="patch:\accounts\(accountNumber):application\json:bank-account-api-config-test" doc:id="8d952324-6844-4204-8dfc-d18cc19560d9" >
		<munit:behavior >
			<munit:set-event doc:name="Set Input" doc:id="93952958-c28f-4197-b6f3-915fd8410826" >
				<munit:payload value="#[output application/json --- readUrl('classpath://patchaccountsaccountNumberapplicationjsonbankaccountapiconfigtest\set-event_payload.dwl')]" encoding="UTF-8" mediaType="application/json" />
				<munit:attributes value="#[readUrl('classpath://patchaccountsaccountNumberapplicationjsonbankaccountapiconfigtest\set-event_attributes.dwl')]" />
				<munit:variables >
					<munit:variable key="outboundHeaders" value="#[readUrl('classpath://patchaccountsaccountNumberapplicationjsonbankaccountapiconfigtest\set-event_variable_.dwl')]" />
				</munit:variables>
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to patch:\accounts\(accountNumber):application\json:bank-account-api-config" doc:id="6672f718-e580-4f89-bf75-b52229fa031a" name="patch:\accounts\(accountNumber):application\json:bank-account-api-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="23aa3ddc-8bb3-471d-85da-89cd89d1a697" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import patchaccountsaccountNumberapplicationjsonbankaccountapiconfigtest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
		</munit:validation>
	</munit:test>


</mule>
